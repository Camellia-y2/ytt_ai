<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="container">1</div>
    <button id="button" type="button">点击加1</button>
    <button id="loginBtn" type="button">登录</button>
    <script>
        //js dom api
        // 不利于业务，性能不好，dom操作太多会触发很多重绘重排
        // document.getElementById('button').addEventListener('click', function() {
        //     var container = document.getElementById('container');
        //     // 显式类型转换
        //     container.innerHTML = Number(container.innerHTML) + 1;
        // })
        // 响应式开发 数据状态 它发生改变，数据绑定的地方会自动更新
        // MVVM模式 Model-> count View -> #container ViewModel-> 数据绑定的地方JSX

        // 1.状态的创建
        // 定义对象来实现
        var obj = {
            // 监听这个状态的改变
            value: 1, //数据 响应式？状态呢？
            isLogin: false,
        }
        let value = 1;
        let isLogin = false;

        Object.defineProperty(obj, "value", {
            // 读取行为
            // 定义obj上的属性value, 有什么样的操作
            get: function() {
                console.log('读取了value属性')
                return value
            },
            // 拦截
            set: function(newValue) {
                value = newValue
                document.getElementById('container').innerHTML = newValue
                console.log('set')
            }
        })
        // 一次只能定义一个property        
        Object.defineProperty(obj, 'isLogin', {
            get: function(){ // 点击不会触发这个，是个boolean
                console.log('正在读取isLogin属性')
                return isLogin
            },
            set: function(newValue){
                isLogin = newValue
                document.getElementById('loginBtn').innerText = '登出'
            }
        })
        document.getElementById('button').addEventListener('click', function() {
            obj.value += 1; // 读取+设置的组合操作 ，因此会同时触发 get 和 set 方法
        })
        document.getElementById('loginBtn').addEventListener('click', function() {
            obj.isLogin = true; // 设置属性值（触发 set 方法）
            console.log('当前登录状态:', obj.isLogin); // 读取属性值（触发 get 方法）
        })
    </script>
</body>
</html>